<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>สละสิทธิ์</title>
    <style>
        h1 {
            font-size: 40px;
            margin-left: 10%;
            margin-right: 10%;
            border-bottom: 5px solid rgb(77, 77, 77);
        }
        #profile{
            background: rgb(54, 118, 255);
            width: 80%;
            margin-left: 10%;
        }
        #content {
            background: aquamarine;
            width: 80%;
            margin-left: 10%;
        }
    </style>
</head>
<body>
        
    <div id="header">
        <caption><h1>สละสิทธิ์</h1></caption>
    </div>
    <div id="profile"></div>
    <div id="content">
        <!-- <form action="javascript:update(inID, inUni)">
            ชื่อมหาวิทยาลัยที่เลือกศึกษาต่อ<br>
            <select name="inUni">
                <option value="ลาดกระบัง">ลาดกระบัง</option>
                <option value="พระนครเหนือ">พระนครเหนือ</option>
                <option value="จุฬา">จุฬา</option>
                <option value="ธรรมศาสตร์">ธรรมศาสตร์</option>
                <option value="มหิดล">มหิดล</option>
                <option value="เกษตร">เกษตร</option>
                <option value="มช">มช</option>
                <option value="ABAC">ABAC</option>
                <option value="ราม">ราม</option>
            </select>
            <br>เหตุผล<br>
            <textarea rows=3 cols=50></textarea><br>
            <input type="submit">
        </form> -->
    </div>

    <script>
        load();
        
        function load(){
            var xmlhttp = new XMLHttpRequest();
            var url = location.protocol + '//' + location.host+"/Project/recruit-status-confirm-link.php?inID=1";
            
            xmlhttp.onreadystatechange=function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    displayResponse(xmlhttp.responseText);
                }
            }
            xmlhttp.open("GET", url, true);
            xmlhttp.send();
        }
        
        function displayResponse(response) {
            var arr = JSON.parse(response);
            var out = "รหัสประจำตัวผู้สมัคร : "+ arr[0].RecruitID +"<br>"+
                    "ชื่อ : "+ arr[0].Prefix + arr[0].FirstName +" "+ arr[0].LastName +"<br>";
            document.getElementById("profile").innerHTML = out;

            // var outform = "<form action=\"recruit-status-reject-link.php?inID="+arr[0].RecruitID+"\" method=\"POST\">"+
            var outform = "<form action=\"update("+arr[0].RecruitID+", inUni)\">"+
                            "ชื่อมหาวิทยาลัยที่เลือกศึกษาต่อ<br>"+
                            "<select name=\"inUni\">"+
                                "<option value=\"ลาดกระบัง\">ลาดกระบัง</option>"+
                                "<option value=\"พระนครเหนือ\">พระนครเหนือ</option>"+
                                "<option value=\"จุฬา\">จุฬา</option>"+
                                "<option value=\"ธรรมศาสตร์\">ธรรมศาสตร์</option>"+
                                "<option value=\"มหิดล\">มหิดล</option>"+
                                "<option value=\"เกษตร\">เกษตร</option>"+
                                "<option value=\"มช\">มช</option>"+
                                "<option value=\"ABAC\">ABAC</option>"+
                                "<option value=\"ราม\">ราม</option>"+
                            "</select>"+
                            "<br>เหตุผล<br>"+
                            "<textarea rows=3 cols=50></textarea><br>"+
                            "<input type=\"submit\">"+
                        "</form>";
            document.getElementById("content").innerHTML = outform;
        }

        function update(inID, inUni) {
            var xmlhttp = new XMLHttpRequest();
            var url = location.protocol + '//' + location.host+"/Project/recruit-status-reject-link.php?inID="+inID+"&inUni="+inUni;

            xmlhttp.onreadystatechange=function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                //displayResponse(xmlhttp.responseText);
                
                }
            }
            xmlhttp.open("POST", url, true);
            xmlhttp.send();

        }
    </script>
</body>
</html>